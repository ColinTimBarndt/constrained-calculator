<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hardware Calculator</title>

    <link rel="stylesheet" href="style.css">

    <script type="module" src="src/main.ts" defer></script>
</head>

<body>
    <fieldset data-app="led-driver">
        <legend>LED Driver</legend>
        <h3>Constrained Calculator</h3>
        <script type="katex">
            \begin{align}
                T_{ON}~\left[\text{s}\right]  &= \frac{L \cdot \Delta I}{V_{IN} - V_{LED} - I_{LED} \cdot (R_S + R_L + R_{LX})}\\
                T_{OFF}~\left[\text{s}\right] &= \frac{L \cdot \Delta I}{V_{LED} + V_D + I_{LED} \cdot (R_S + R_L)}\\
                f_{SW}~[\text{Hz}]            &= \left(T_{ON} + T_{OFF}\right)^{-1}
            \end{align}
        </script>
        <form name="form">
            <div class="col3">
                <script type="katex" data-inline>V_{IN}~\left[\text{V}\right]</script>
                <input type="text" name="v_in" data-unit="V" value="20 V">
                <label>Input Voltage</label>

                <script type="katex" data-inline>R_L~\left[\Omega\right]</script>
                <input type="text" name="r_l" data-unit="mohm" value="300 mΩ">
                <label>Inductor Resistance</label>

                <script type="katex" data-inline>V_D~\left[\text{V}\right]</script>
                <input type="text" name="v_d" data-unit="mV" value="450 mV">
                <label>Flyback Diode Forward Voltage</label>

                <script type="katex" data-inline>V_{LED}~\left[\text{V}\right]</script>
                <input type="text" name="v_led" data-unit="V" value="3.4 V">
                <label>LED Forward Voltage</label>

                <script type="katex" data-inline>I_{LED}~\left[\text{A}\right]</script>
                <input type="text" name="i_led" data-unit="mA" value="0 mA">
                <label>LED Current</label>

                <script type="katex" data-inline>R_S~\left[\Omega\right]</script>
                <input type="text" name="r_s" data-unit="mohm" value="150 mΩ">
                <label>Current Sense Resistance</label>

                <script type="katex" data-inline>L~\left[\text{H}\right]</script>
                <input type="text" name="l" data-unit="uH" value="47 uH">
                <label>Inductor</label>

                <h4>IC Specification</h4>

                <script type="katex" data-inline>V_S~\left[\text{V}\right]</script>
                <input type="text" name="v_s" data-unit="mV" value="100 mV">
                <label>Current Sense Voltage</label>

                <script type="katex" data-inline>\Delta I / I_{LED}</script>
                <input type="text" name="ripple_mult" data-unit="" value="0.26">
                <label>Ripple Multiplier</label>

                <script type="katex" data-inline>\Delta I~\left[\text{A}\right]</script>
                <input type="text" name="ripple" data-unit="mA" value="0 mA">
                <label>Ripple</label>

                <script type="katex" data-inline>R_{LX}~\left[\Omega\right]</script>
                <input type="text" name="r_lx" data-unit="mohm" value="200 mΩ">
                <label>Switch Resistance</label>

                <h4>Switching Characteristics</h4>

                <script type="katex" data-inline>T_{ON}~\left[\text{s}\right]</script>
                <input type="text" name="t_on" data-unit="ns" value="0 ns">
                <label>On Time</label>

                <script type="katex" data-inline>T_{OFF}~\left[\text{s}\right]</script>
                <input type="text" name="t_off" data-unit="ns" value="0 ns">
                <label>Off Time</label>

                <script type="katex" data-inline>D</script>
                <input type="text" name="d" data-unit="" value="0" disabled>
                <label>Duty Cycle</label>

                <script type="katex" data-inline>f_{SW}~\left[\text{Hz}\right]</script>
                <input type="text" name="f_sw" data-unit="kHz" value="0 kHz" disabled>
                <label>Switch Frequency</label>
            </div>
        </form>
    </fieldset>
</body>

</html>